## Context

아동(3~5세)을 위한 영어 파닉스 교육 서비스를 신규 구축합니다. 현재 코드베이스는 빈 상태이며, 웹/앱/웹앱 모두에서 작동 가능한 크로스 플랫폼 구조를 목표로 합니다.

**주요 제약사항**:
- 타겟 사용자가 아동이므로 단순하고 직관적인 UI 필수
- 오디오가 핵심 학습 매체이므로 안정적인 재생 시스템 필요
- 다양한 디바이스와 네트워크 환경 고려 (모바일, 태블릿, 데스크톱)
- 에셋(오디오, 이미지) 크기 최적화 필요

**현재 상태**:
- 신규 프로젝트 (기존 코드 없음)
- 단일 개발자 또는 소규모 팀 가정
- 초기 MVP(Minimum Viable Product) 접근

## Goals / Non-Goals

**Goals:**
- 웹 우선 개발 (Progressive Web App), 이후 모바일 앱으로 확장 가능한 구조
- 알파벳, 단어, 대화 학습 기능 구현
- 오디오 자동 재생 및 3회 반복 시스템
- 아동 친화적이고 직관적인 UI/UX
- 반응형 디자인 (다양한 화면 크기 대응)
- 오프라인 지원 (PWA 캐싱)

**Non-Goals:**
- 사용자 인증 및 로그인 시스템 (닉네임만 로컬 저장)
- 서버 기반 학습 진행 상황 동기화 (초기 버전)
- 실시간 음성 인식 및 발음 평가
- 게임화 요소 (포인트, 배지, 리더보드) - 향후 고려
- 부모/교사 대시보드 - 향후 고려
- 다국어 지원 (한국어 UI만 제공)

## Decisions

### 1. 기술 스택: React + Vite (웹 우선)

**결정**: 웹 애플리케이션을 React + Vite로 먼저 구축하고, PWA로 만들어 다양한 플랫폼에서 사용 가능하도록 합니다.

**근거**:
- React: 풍부한 생태계, 컴포넌트 재사용성, 모바일 확장 시 React Native로 전환 용이
- Vite: 빠른 개발 환경, 최적화된 빌드, 현대적인 개발 경험
- PWA: 웹으로 시작하되 설치 가능한 앱처럼 동작, 오프라인 지원

**대안 고려**:
- Flutter: 네이티브 성능, 크로스 플랫폼이지만 웹 성숙도가 낮고 학습 곡선 존재
- Next.js: SEO 장점이 있으나 교육 앱에서 불필요한 복잡성 추가

### 2. 아키텍처: Frontend-Only (정적 에셋)

**결정**: 백엔드 서버 없이 프론트엔드만으로 구성. 학습 콘텐츠(JSON), 이미지, 오디오는 정적 에셋으로 번들링하거나 CDN에서 제공.

**근거**:
- 초기 버전에서 동적 콘텐츠 관리 불필요
- 인프라 비용 절감, 배포 단순화
- 빠른 로딩과 오프라인 지원 용이

**대안 고려**:
- Backend + API: 콘텐츠 동적 관리 가능하나 초기에는 과도한 복잡성
- 향후 확장: 콘텐츠가 늘어나면 Headless CMS 또는 간단한 API 서버 추가 검토

### 3. 상태 관리: React Context API

**결정**: 전역 상태 관리는 React Context API 사용.

**근거**:
- 앱 상태가 단순 (닉네임, 현재 학습 모드, 오디오 재생 상태)
- 추가 라이브러리 없이 React 내장 기능 활용
- 러닝 커브 낮음

**관리할 상태**:
- 사용자 닉네임
- 현재 학습 카테고리 (알파벳/단어/대화)
- 현재 학습 아이템 인덱스
- 오디오 재생 상태 (재생 횟수, 타이머)

**대안 고려**:
- Zustand, Redux: 더 복잡한 상태 관리 필요 시 고려, 현재는 과도

### 4. 콘텐츠 데이터 구조: JSON 파일

**결정**: 학습 콘텐츠를 JSON 파일로 관리, `src/data/` 디렉토리에 저장.

**데이터 구조**:
```json
// alphabets.json
[
  {
    "letter": "A",
    "uppercase": "A",
    "lowercase": "a",
    "exampleWord": "Apple",
    "exampleImage": "/assets/images/apple.png",
    "audioFile": "/assets/audio/alphabet-a.mp3"
  }
]

// vocabulary.json
{
  "categories": {
    "food-ingredients": [
      {
        "word": "apple",
        "spelling": "Apple",
        "image": "/assets/images/apple.png",
        "audio": "/assets/audio/word-apple.mp3"
      }
    ],
    "cooking": [...],
    "animals": [...],
    "vehicles": [...],
    "body-parts": [...]
  }
}

// conversations.json
[
  {
    "id": "greeting-1",
    "title": "인사하기",
    "sentences": [
      {
        "text": "Hello!",
        "audio": "/assets/audio/conv-hello.mp3"
      },
      {
        "text": "Hi! How are you?",
        "audio": "/assets/audio/conv-how-are-you.mp3"
      }
    ]
  }
]
```

**콘텐츠 규모**:
- 알파벳: 26개 (A-Z)
- 단어: 각 카테고리별 10개 (총 50개)
- 대화: 초기 7개 세트 (각 5문장)

**단어 표시 방식**:
- 각 카테고리에서 매번 랜덤하게 단어 선택
- 동일한 순서로 표시되지 않도록 Fisher-Yates 셔플 알고리즘 사용
- 사용자가 같은 카테고리를 다시 선택하면 다른 순서로 학습 가능

**대화 주제**:
1. 친구와 인사
2. 친구와 역할놀이
3. 엄마에게 도움 요청
4. 아빠에게 도움 요청
5. 나의 감정 상태
6. "XX 주세요" (물건 요청)
7. "XX 해주세요" (행동 요청)

**근거**:
- 타입 안정성 (TypeScript 인터페이스 정의)
- 버전 관리 용이
- 향후 CMS 마이그레이션 시 구조 재활용 가능
- 랜덤 표시로 반복 학습 시 새로운 경험 제공
- 일상 대화 주제로 실용적 학습

### 5. 오디오 시스템: Web Audio API + HTMLAudioElement + TTS

**결정**:
- 기본 재생: `HTMLAudioElement` 사용 (브라우저 호환성 우수)
- 타이밍 제어: JavaScript `setTimeout`으로 반복 및 대기 시간 관리
- **오디오 생성: TTS (Text-to-Speech) 사용**

**재생 로직**:
1. 오디오 자동 재생 (화면 표시 시)
2. **동적 대기 시간**: 오디오 길이 × 2 (예: 1초 오디오 → 2초 대기)
3. 다시 재생 (총 3회 반복)
4. "다음" 버튼 활성화

**오디오 생성 방법**:
- Web Speech API 또는 외부 TTS 서비스 (Google Cloud TTS, Amazon Polly 등)
- MP3 포맷으로 사전 생성하여 에셋으로 저장

**오디오 포맷**: MP3 (호환성) + OGG fallback (선택사항)

**근거**:
- TTS 사용으로 콘텐츠 추가/변경 시 녹음 불필요
- 일관된 발음과 속도 유지
- 비용 효율적이고 확장 가능
- 3회 반복 로직을 명시적으로 제어 가능
- 동적 대기 시간으로 짧은/긴 단어 모두 적절한 연습 시간 제공

**대안 고려**:
- 원어민 녹음: 더 자연스러우나 콘텐츠 확장 시 비용/시간 소요
- Howler.js: 더 강력한 오디오 라이브러리이나 현재 요구사항에는 과도

### 6. 에셋 최적화

**결정**:
- **오디오**: MP3, 64-96 kbps, 모노 (용량 최소화)
- **이미지**: WebP 포맷, 최대 800x800px, lazy loading
- **번들링**: Vite 청크 분할, 초기 로딩 시 필수 에셋만 로드

**근거**:
- 모바일 네트워크 환경 고려
- 빠른 초기 로딩 경험
- PWA 오프라인 캐싱 시 적절한 크기

### 7. 사용자 데이터 저장: LocalStorage

**결정**: 닉네임만 `localStorage`에 저장. 학습 진행 상황 추적은 향후 추가.

**근거**:
- 간단한 키-값 저장
- 서버 불필요
- 브라우저 지원 보편적

**저장 데이터**:
```json
{
  "nickname": "홍길동",
  "lastVisited": "2026-02-10T10:30:00Z"
}
```

### 8. UI 라이브러리: Tailwind CSS

**결정**: Tailwind CSS로 스타일링.

**근거**:
- 빠른 개발 속도
- 반응형 디자인 용이
- 커스텀 디자인 시스템 구축 가능
- 아동 친화적 큰 버튼, 밝은 색상 쉽게 구현

**대안 고려**:
- Material-UI, Ant Design: 성인용 UI이고 아동 친화적 커스터마이징 복잡

### 9. 라우팅: React Router

**결정**: React Router로 페이지 네비게이션 구현.

**주요 라우트**:
- `/` - 홈 (닉네임 입력)
- `/select-category` - 학습 카테고리 선택
- `/alphabet` - 알파벳 학습
- `/vocabulary/:category` - 단어 학습 (카테고리별)
- `/conversation` - 대화 학습

## Risks / Trade-offs

### 1. 모바일 브라우저 자동재생 제한
**위험**: iOS Safari, Chrome 등에서 자동 오디오 재생 차단 정책
**완화**: 첫 화면에서 "시작하기" 버튼 클릭 (사용자 제스처)으로 오디오 컨텍스트 활성화

### 2. 에셋 크기와 로딩 시간
**위험**: 오디오/이미지 파일이 많아지면 초기 로딩 느려짐
**완화**:
- Lazy loading (필요한 에셋만 로드)
- PWA 점진적 캐싱
- 압축 최적화 (MP3 64kbps, WebP)
- 향후 CDN 활용

### 3. 오프라인 지원 복잡성
**위험**: Service Worker 캐싱 전략 복잡, 업데이트 시 캐시 무효화 문제
**완화**:
- Workbox 라이브러리 사용 (Vite PWA 플러그인)
- Cache-first 전략 (에셋), Network-first 전략 (데이터)

### 4. 크로스 브라우저 호환성
**위험**: 오래된 브라우저에서 동작 안 할 수 있음
**완화**:
- 최신 2개 버전 주요 브라우저 지원 (Chrome, Safari, Firefox, Edge)
- Polyfills (Vite 자동 처리)
- 사용자에게 브라우저 업데이트 권장

### 5. 접근성 (Accessibility)
**위험**: 시각/청각 장애 아동 지원 부족
**완화**:
- ARIA 레이블 추가
- 키보드 네비게이션 지원
- 고대비 모드 (향후)
- 자막/텍스트 표시 옵션 (향후)

### 6. 콘텐츠 확장성
**트레이드오프**: 정적 JSON 파일은 초기에는 간단하지만, 콘텐츠가 수백 개로 늘어나면 관리 어려움
**완화**:
- 향후 Headless CMS (Strapi, Contentful) 도입 검토
- 현재는 체계적인 파일 구조 유지 (`data/alphabets/`, `data/vocabulary/`, `data/conversations/`)

## Migration Plan

**초기 구축 단계** (MVP):
1. React + Vite + Tailwind 프로젝트 초기화
2. 홈 화면 (닉네임 입력) 구현
3. 카테고리 선택 화면 구현
4. 알파벳 학습 모듈 구현 (프로토타입)
5. 오디오 재생 시스템 테스트
6. 단어 학습 모듈 구현
7. 대화 학습 모듈 구현
8. PWA 설정 및 오프라인 지원

**배포**:
- Vercel 또는 Netlify 무료 호스팅
- GitHub Pages 대안

**향후 확장**:
- React Native 모바일 앱 (코드 재사용)
- Headless CMS 콘텐츠 관리
- 학습 진행 상황 추적 및 분석
- 부모/교사 대시보드

## Resolved Decisions

다음 사항들이 결정되었습니다:

1. ✅ **오디오 생성**: TTS (Text-to-Speech) 사용 → Decision 5 참조
2. ✅ **대기 시간**: 오디오 길이 × 2 (동적 조정) → Decision 5 참조
3. ✅ **단어 개수**: 각 카테고리별 10개, 랜덤 표시 → Decision 4 참조
4. ✅ **대화 주제**: 7가지 일상 주제 (인사, 역할놀이, 도움 요청 등) → Decision 4 참조

## Open Questions

다음 사항들은 구현 단계에서 결정 예정:

1. **진행 상황 추적**: 아이가 어느 알파벳/단어까지 학습했는지 추적할 것인가? (MVP 범위 외, 향후 고려)
2. **반복 학습**: 완료한 알파벳/단어를 다시 선택하여 학습할 수 있는 기능 필요한가? (구현 시 결정)
3. **부모 모니터링**: 부모가 아이의 학습 현황을 볼 수 있는 기능이 필요한가? (MVP 범위 외, 향후 고려)
4. **TTS 서비스 선택**: Google Cloud TTS, Amazon Polly, Azure TTS 중 어느 것을 사용할 것인가? (구현 시 비용/품질 비교)
5. **단어 선정**: 각 카테고리별 구체적인 10개 단어 목록 (콘텐츠 제작 단계에서 결정)
